"use strict";(self.webpackChunkdivine_shop_gatsby=self.webpackChunkdivine_shop_gatsby||[]).push([[2690],{1711:function(e,s,i){i.d(s,{LL:function(){return d},Xq:function(){return l},dZ:function(){return r},h2:function(){return c}});var t=i(4406),n=i(5965),a=i(3422);const l=e=>(0,t.gz)(n.$L,(s=>{let{list:i}=s;const t=Array.isArray(e)?e:[e];(0,a.m8)(t);let n=i;return t.forEach((e=>{const s=n.findIndex((s=>{let{id:i}=s;return i===e.id}));n=-1!==s?n.slice(0,s).concat(e,n.slice(s+1)):n.concat(e)})),{list:n}})),c=e=>(0,t.gz)(n.$L,(s=>{let{list:i}=s;return{list:i.filter((s=>s.id!==e))}})),d=()=>(0,t.gz)(n.$L,(()=>({list:[]}))),r=(e,s)=>(0,t.gz)(n.$L,(i=>{let{list:t}=i;const n=t.findIndex((s=>s.id===e));return{list:-1!==n?t.slice(0,n).concat({...t[n],quantity:s},t.slice(n+1)):t}}))},9310:function(e,s,i){i.d(s,{$:function(){return c},M:function(){return l}});var t=i(5785),n=i(4406),a=i(5965);const l=e=>{const{id:s}=e;(0,n.gz)(a.iC,(e=>e.list.some((e=>{let{id:i}=e;return i===s}))?e:{list:[{id:s}].concat((0,t.Z)(e.list))})),(0,n.gz)((0,n.wS)(a.qG,{slug:"wishlist"}),(i=>i.list.some((e=>{let{id:i}=e;return i===s}))?i:{list:[e].concat((0,t.Z)(i.list))}))},c=e=>{(0,n.gz)(a.iC,(s=>{const i=s.list.findIndex((s=>{let{id:i}=s;return i===e}));return-1===i?s:{list:s.list.slice(0,i).concat(s.list.slice(i+1))}})),(0,n.gz)((0,n.wS)(a.qG,{slug:"wishlist"}),(s=>{const i=s.list.findIndex((s=>{let{id:i}=s;return i===e}));return-1===i?s:{list:s.list.slice(0,i).concat(s.list.slice(i+1))}}))}},8359:function(e,s,i){var t=i(550),n=i(6553),a=i(6021),l=i(5893);const c=e=>{let{tag:s}=e;return(0,l.jsx)(t.Z,{to:`/search${(0,n.stringify)({tag:s.toLowerCase()})}`,children:s})};s.Z=e=>{let{tags:s}=e;return(0,a.i)(s.map(((e,s)=>(0,l.jsx)(c,{tag:e},s))),", ")}},9546:function(e,s,i){var t=i(7294),n=i(7292),a=i(5893);s.Z=()=>{const{0:e,1:s}=(0,t.useState)(!1),i=(0,t.useRef)();return{prompting:e,prompt:(0,t.useCallback)((e=>{e.preventDefault(),i.current=e,s(!0)}),[]),Prompter:(0,t.useMemo)((()=>e=>{let{title:t,children:l,onSubmit:c,onClose:d,submitTitle:r=null,closeTitle:h=null}=e;return(0,a.jsx)(n.Z,{title:t,onSubmit:e=>{null==c||c(i.current,e),s(!1)},onClose:()=>{null==d||d(),s(!1)},submitTitle:r,closeTitle:h,children:l})}),[])}}},8932:function(e,s,i){i.r(s),i.d(s,{default:function(){return qe}});var t=i(777),n=i(3577),a=i(4379),l=i(7294);const c=(0,l.createContext)();var d=c;const r=()=>(0,l.useContext)(c);var h=i(5893);const m=e=>{let{title:s,html:i}=e;return(0,h.jsx)("div",{className:"ta ec",children:(0,h.jsxs)("div",{className:"vg Je Xa",children:[(0,h.jsx)("h4",{className:"Ub vb",children:s}),(0,h.jsx)("div",{className:"Vb",children:(0,h.jsx)(n.Z,{__html:i})})]})})};var o=()=>{const{id:e}=r(),{data:{notification:s,tutorial:i,description:t,platform:l,policy:c,info:d}={}}=(0,a.Z)("/api/product/description",{query:{id:e}});return(0,h.jsxs)(h.Fragment,{children:[s&&(0,h.jsx)(n.Z,{__html:s}),(0,h.jsx)(n.Z,{__html:i}),(0,h.jsxs)("div",{className:"Oe",children:[(0,h.jsx)(m,{title:"Chi tiết sản phẩm",html:t}),l&&(0,h.jsx)(m,{title:"Cấu hình",html:l}),c&&(0,h.jsx)(m,{title:"Chính sách bảo hành",html:c}),d&&(0,h.jsx)(m,{title:"Câu hỏi thường gặp",html:d})]})]})},u=i(550),x=i(9979),j=i(4954),v=i(8359),g=i(7416),b=i(1597),p=i(1151),N=i(1711),Z=i(5938),f=i(3816);const C={datetime:"datetime-local"};var y=e=>{let{id:s,type:i,title:t,value:n,values:a,constraints:c}=e;switch(i){case"checkbox":return(0,h.jsx)(f.XZ,{name:s,type:i,defaultChecked:!!n,...c,children:t});case"radio":return(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsx)("div",{className:"Zd",children:t}),a.map((e=>{let{text:i,value:t}=e;return(0,l.createElement)(f.Y8,{name:s,value:t,defaultChecked:t===n,...c,key:t},i)}))]});case"select":return(0,h.jsx)(f.Ph,{name:s,options:[["","---"]].concat(a.map((e=>{let{value:s,text:i}=e;return[s,i]}))),...c,defaultValue:n,label:t});case"textarea":return(0,h.jsx)(f.gx,{name:s,defaultValue:n,...c,placeholder:t});default:return(0,h.jsx)(f.II,{name:s,type:C[i]||i,defaultValue:n,...c,label:t})}},k=i(6801),S=i(8489),D=i(9253),T=i(5092),M=i(5785),F=i(4406),q=i(5965);const E=e=>{const{id:s}=e;(0,F.gz)(q.bM,(e=>e.list.some((e=>{let{id:i}=e;return i===s}))?e:{list:[{id:s}].concat((0,M.Z)(e.list))}))},$=e=>{(0,F.gz)(q.bM,(s=>{const i=s.list.findIndex((s=>{let{id:i}=s;return i===e}));return-1===i?s:{list:s.list.slice(0,i).concat(s.list.slice(i+1))}}))};var w=i(9960),z=i(3745);const I=()=>{const e=r(),{loading:s,mutate:i}=(0,Z.Z)(),{data:{list:t=[]}={}}=(0,a.Z)(q.bM),{id:n}=e,l=t.some((e=>e.id===n));return(0,h.jsxs)("button",{type:"button",className:"db b c ta mc jc Ee",title:l?"Đăng ký nhận thông báo khi có hàng":"Hủy đăng ký nhận thông báo khi có hàng",onClick:()=>{const s=l?()=>$(n):()=>E(e),t=l?()=>E(e):()=>$(n),a=l?`${q.bM}/unsubscribe`:q.bM;i({id:n},{url:a,onFulfilled:l?null:()=>S.Z.success("Đã đăng ký nhận thông báo khi có hàng"),onRejected:e=>{S.Z.error(e.message),t()}}),s()},disabled:s,children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:l?x.w$:x.D4}),(0,h.jsx)("div",{children:l?"Hủy thông báo có hàng":"Thông báo khi có hàng"})]})},H=()=>(0,h.jsxs)(w.Z,{className:"db b b c ta mc jc Ee",title:"Đăng nhập và đăng ký nhận thông báo khi sản phẩm có hàng",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.D4}),(0,h.jsx)("div",{children:"Thông báo khi có hàng"})]});var _=()=>{const{data:e}=(0,z.Z)();return e?(0,h.jsx)(I,{}):(0,h.jsx)(H,{})},X=i(9546),G=i(7644),L=i(6735);var R=()=>{const{id:e}=r(),{loading:s,mutate:i}=(0,G.Z)("/api/cart/add-multiple"),t=(0,l.useMemo)((()=>({id:e})),[e]),{data:n}=(0,a.Z)(q.AT,{query:t}),{value:c,entries:d=[]}=n||{},m=e=>{let{onCompleted:s}=e;const t=d.map((e=>{let{quantity:s,product:{id:i}}=e;return{id:i,quantity:s}})),n=i(t,{onCompleted:s,onFulfilled:e=>{let{list:s}=e;return(0,N.Xq)(s)}});S.Z.loading("Thêm sản phẩm vào giỏ hàng",n.then((()=>"Sản phẩm đã được thêm vào giỏ hàng")))};return(0,h.jsxs)("fieldset",{className:"Ie",disabled:s||!c,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h6",{children:"Gói Steam Wallet phù hợp"}),(0,h.jsx)("div",{className:"de Yd",children:"(Áp dụng cho giá game ở khu vực Việt Nam)"})]}),(0,h.jsxs)("div",{className:"Fe",children:[!n&&(0,h.jsx)("div",{className:"fe ac",children:"Đang lựa chọn gói nạp phù hợp"}),d.map(((e,s)=>{let{quantity:i,product:{id:t,name:n,slug:a,price:l,originalPrice:c}}=e;return(0,h.jsxs)("div",{className:"ta nc Ee",children:[(0,h.jsx)(u.Z,{to:`/${a}`,onPrefetch:()=>(0,L.dv)(t),children:n}),(0,h.jsxs)("div",{className:"vc",children:[i," x ",(0,h.jsx)("span",{className:"Zd",children:(0,h.jsx)(j.Z,{value:l||c})})]})]},s)})),c&&(0,h.jsxs)("div",{className:"db Ud",children:["Thành tiền: ",(0,h.jsx)("span",{className:"Zd",children:(0,h.jsx)(j.Z,{value:c})})]})]}),(0,h.jsx)("div",{className:"ta ec kc",children:(0,h.jsxs)("div",{className:"ta gc Ge",children:[(0,h.jsx)("div",{className:"Tb",children:(0,h.jsxs)("button",{type:"button",className:"db b c ta Ee mc jc",onClick:()=>{m({onCompleted:()=>(0,b.c4)(T.tX)}),(0,D.i)(T.tX)},children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.yp}),(0,h.jsx)("div",{children:"Mua ngay"})]})}),(0,h.jsx)("div",{className:"Tb",children:(0,h.jsxs)("button",{type:"button",className:"db b d ta Ee mc jc",onClick:m,children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.U7}),(0,h.jsx)("div",{children:"Thêm vào giỏ"})]})})]})})]})};var P=()=>{const{id:e,available:s,tos:i,steam:t,options:a=[]}=r(),c=(0,l.useMemo)((()=>({id:e,quantity:1})),[e]),{loading:d,submit:m}=(0,Z.Z)(c),{0:o,1:u}=(0,l.useState)(!1),{prompting:j,prompt:v,Prompter:g}=(0,X.Z)(),f=(0,l.useRef)(),C=e=>{let{currentTarget:s,target:i,nativeEvent:{detail:t}}=e;var n;t>0&&(f.current=s||(null==i||null===(n=i.closest)||void 0===n?void 0:n.call(i,"[data-action]")))},M=e=>{var s,i;const t="buy"===(null===(s=f.current)||void 0===s||null===(i=s.dataset)||void 0===i?void 0:i.action),n=m(e,{onCompleted:t?()=>(0,b.c4)(T.tX):null,onFulfilled:N.Xq});S.Z.loading("Thêm sản phẩm vào giỏ hàng",n.then((()=>"Sản phẩm đã được thêm vào giỏ hàng"))),t&&(0,D.i)(T.tX)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("form",{action:"/api/cart/add",onSubmit:i?v:M,children:(0,h.jsxs)("fieldset",{className:"Oe",disabled:d,children:[a.length>0&&(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsx)("h6",{children:"Nhập thông tin bổ sung"}),a.map((e=>(0,h.jsx)(p.Z,{message:e.description,children:(0,h.jsx)(y,{...e})},e.id)))]}),(0,h.jsxs)("div",{className:"ta gc Ge",children:[!t&&(0,h.jsx)("div",{className:"Tb",children:!1!==s?(0,h.jsxs)("button",{type:"submit",className:"db b c ta Ee mc jc",onClick:C,"data-action":"buy",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.yp}),(0,h.jsx)("div",{children:"Mua ngay"})]}):(0,h.jsx)(_,{})}),t&&(0,h.jsx)("div",{className:"Tb",children:(0,h.jsxs)("button",{type:"button",className:"db b c ta Ee mc jc -ad wf Bf",onClick:()=>u((e=>!e)),onTouchStart:()=>(0,L.p6)(e),onMouseDown:()=>(0,L.p6)(e),children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.Dz}),(0,h.jsx)("div",{children:"Mua bằng Steam Wallet"})]})}),!t&&(0,h.jsx)("div",{className:"Tb",children:(0,h.jsxs)("button",{type:"submit",className:"db b d ta Ee mc jc",onClick:C,children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.U7}),(0,h.jsx)("div",{children:"Thêm vào giỏ"})]})})]})]})}),o&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"f"}),(0,h.jsx)(R,{})]}),j&&(0,h.jsx)(g,{title:i.title,onSubmit:M,children:(0,h.jsx)(n.Z,{__html:i.description})})]})},O=i(1714),B=i(9310);const U=()=>{const e=r(),{loading:s,mutate:i}=(0,Z.Z)(),{data:{list:t=[]}={}}=(0,a.Z)(q.iC),{id:n}=e,l=t.some((e=>e.id===n));return(0,h.jsx)("button",{type:"button",className:"b",title:"Thêm vào danh sách yêu thích",disabled:s,onClick:()=>{const s=l?()=>(0,B.$)(n):()=>(0,B.M)(e),t=l?()=>(0,B.M)(e):()=>(0,B.$)(n);i({id:n},{url:l?"/api/user/wishlist/remove":"/api/user/wishlist/add",onFulfilled:l?null:()=>S.Z.success("Đã thêm sản phẩm vào danh sách yêu thích"),onRejected:e=>{S.Z.error(e.message),t()}}),s()},children:(0,h.jsx)(k.Z,{className:(0,O.Z)("Hb Ba",l?"de":"ie"),icon:x.cd})})},V=()=>(0,h.jsx)(w.Z,{className:"b",title:"Đăng nhập và thêm vào danh sách yêu thích",children:(0,h.jsx)(k.Z,{className:"Hb Ba ie",icon:x.cd})});var Q=()=>{const{data:e}=(0,z.Z)();return e?(0,h.jsx)(U,{}):(0,h.jsx)(V,{})};const K=e=>{const{id:s}=e;(0,F.gz)(q.lc,(e=>e.list.some((e=>{let{id:i}=e;return i===s}))?e:{list:[{id:s}].concat((0,M.Z)(e.list))}))},W=e=>{(0,F.gz)(q.lc,(s=>{const i=s.list.findIndex((s=>{let{id:i}=s;return i===e}));return-1===i?s:{list:s.list.slice(0,i).concat(s.list.slice(i+1))}}))},Y=()=>{const e=r(),{loading:s,mutate:i}=(0,Z.Z)(),{data:{list:t=[]}={}}=(0,a.Z)(q.lc),{id:n}=e,l=t.some((e=>e.id===n));return(0,h.jsx)("button",{type:"button",className:"b",title:"Nhận thông báo khi sản phẩm giám giá",disabled:s,onClick:()=>{const s=l?()=>W(n):()=>K(e),t=l?()=>K(e):()=>W(n),a=l?`${q.lc}/unsubscribe`:q.lc;i({id:n},{url:a,onFulfilled:l?null:()=>S.Z.success("Đã đăng ký nhận thông báo giảm giá"),onRejected:e=>{S.Z.error(e.message),t()}}),s()},children:(0,h.jsx)(k.Z,{className:(0,O.Z)("Hb Ba",l?"de":"ie"),icon:x.D4})})},A=()=>(0,h.jsx)(w.Z,{className:"b",title:"Đăng nhập và đăng ký nhận thông báo khi sản phẩm giảm giá",children:(0,h.jsx)(k.Z,{className:"Hb Ba ie",icon:x.D4})});var J=()=>{const{data:e}=(0,z.Z)();return e?(0,h.jsx)(Y,{}):(0,h.jsx)(A,{})},ee=i(4641);const se=()=>{const{id:e,variants:s}=r();return s?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsx)("h6",{children:s.title||"Lựa chọn phiên bản"}),(0,h.jsx)("div",{children:(0,h.jsx)("div",{className:"ta gc Ge",children:s.list.map(((s,i)=>{let{id:t,href:n,slug:a,text:l,available:c}=s;return(0,h.jsx)("div",{children:(0,h.jsx)(u.Z,{to:a?`/${a}`:n,className:(0,O.Z)("b ta jc Ga",t===e?"c":"d",!1===c&&"Gh"),onPrefetch:t?()=>(0,L.dv)(t):null,replace:!!a,state:{shallow:!!a},children:l})},i)}))})})]}),(0,h.jsx)("div",{className:"f"})]}):null};var ie=()=>{const e=r(),{data:s}=(0,ee.Z)(q.HF,{query:{id:e.id}}),{discounts:i=[],name:t,price:a,originalPrice:l,tags:c,status:m,available:o,steam:b,slug:p,specialRelate:N}=s||e;return(0,h.jsx)(d.Provider,{value:s||e,children:(0,h.jsxs)("div",{className:"Oe",children:[(0,h.jsxs)("div",{className:"Le",children:[(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsxs)(u.Z,{to:b||`/${p}`,className:"fe ra",children:["Sản phẩm ",b&&(0,h.jsxs)(h.Fragment,{children:[" trên ",(0,h.jsx)(k.Z,{icon:x.Dz,className:"na ib Da sa"})," Steam"]})]}),(0,h.jsx)("h3",{children:t})]}),(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsxs)("div",{className:"ta Ee fe",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.rS}),(0,h.jsxs)("div",{children:["Tình trạng: ",(0,h.jsx)("span",{className:(0,O.Z)(!1===o?"de":"be"),children:m||(!1===o?"Hết hàng":"Còn hàng")})]})]}),c.length>0&&(0,h.jsxs)("div",{className:"ta Ee fe",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.z7}),(0,h.jsxs)("div",{children:["Thể loại: ",(0,h.jsx)(v.Z,{tags:c})]})]})]})]}),(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsxs)("div",{className:"ta He",children:[(0,h.jsx)("h4",{children:(0,h.jsx)(j.Z,{value:a})}),(0,h.jsx)(J,{}),(0,h.jsx)(Q,{})]}),l!==a&&(0,h.jsxs)("div",{className:"ta Ee jc",children:[(0,h.jsx)("h6",{className:"Zd me ie",children:(0,h.jsx)(j.Z,{value:l})}),(0,h.jsx)(g.Z,{price:a,originalPrice:l})]})]}),i.length>0&&(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsx)("div",{className:"Zd",children:"Khuyến mãi"}),(0,h.jsx)("div",{className:"Ce",children:i.map((e=>{let{quantity:s,price:i}=e;return(0,h.jsxs)("div",{children:["Mua từ ",s," sản phẩm: ",(0,h.jsx)(j.Z,{value:i})]},i)}))})]}),(0,h.jsx)("div",{className:"f"}),(0,h.jsx)(se,{}),(0,h.jsx)(P,{}),N&&(0,h.jsx)("div",{children:(0,h.jsx)(n.Z,{__html:N})})]})})},te=i(5185),ne=i(6553),ae=i(6781);var le=()=>{const{data:e}=(0,z.Z)();return e?e.username?{ru:e.username}:{ri:e.id}:null};const ce=()=>{const e=(0,l.useRef)(),s=(0,l.useRef)(),{id:i}=r(),t=le(),{origin:n}=(0,te.TH)();(0,l.useEffect)((()=>{e.current.querySelector("textarea").value=s.current.outerHTML}),[]);return(0,h.jsxs)("div",{className:"Re",children:[(0,h.jsx)("h3",{children:"Mã nhúng sản phẩm"}),(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsxs)("button",{type:"button",className:"b ta jc Ee",title:"Sao chép",onClick:()=>{e.current.querySelector("textarea").select(),document.execCommand("copy"),S.Z.success("Đã sao chép mã nhúng")},children:[(0,h.jsx)("h6",{children:"Mã nhúng"}),(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.Do})]}),(0,h.jsx)("div",{ref:e,children:(0,h.jsx)("textarea",{className:"g Dd xa Yc",rows:2,placeholder:"Mã nhúng",readOnly:!0})})]}),(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsx)("h6",{children:"Xem trước"}),(0,h.jsx)("iframe",{ref:s,src:`${n}/embed${(0,ne.stringify)({id:i,...t})}`,style:{width:"490px",height:"480px",border:"1px solid lightgray",borderRadius:"5.25px"}})]})]})},de=()=>{const{0:e,1:s}=(0,l.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{type:"button",className:"b d",title:"Nhúng sản phẩm trên trang của bạn",onClick:()=>s(!0),children:(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.RQ})}),e&&(0,h.jsx)(ae.Z,{onClose:()=>s(!1),children:(0,h.jsx)(ce,{})})]})},re=()=>{const e=(0,l.useRef)(),{origin:s,pathname:i}=(0,te.TH)(),t=le(),n=s?`${s}${i}${(0,ne.stringify)(t||{})}`:void 0;return(0,h.jsxs)("div",{ref:e,className:"ta Ee",children:[(0,h.jsx)("div",{className:"Vb",children:(0,h.jsx)(f.II,{value:n,placeholder:"Liên kết giới thiệu",readOnly:!0})}),(0,h.jsx)("button",{type:"button",className:"b c",title:"Sao chép",onClick:()=>{e.current.querySelector("input").select(),document.execCommand("copy"),S.Z.success("Đã sao chép liên kết giới thiệu")},children:(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.Do})}),(0,h.jsx)(de,{})]})},he=()=>{const{id:e}=r(),{loading:s,data:i}=(0,a.Z)("/api/product/info",{query:{id:e}});return s?null:String((null==i?void 0:i.model)||e)};var me=()=>(0,h.jsxs)("div",{className:"Oe",children:[(0,h.jsxs)("div",{className:"Ce",children:[(0,h.jsx)("div",{className:"fe",children:"Mã sản phẩm"}),(0,h.jsx)("div",{className:"Ua Zd",children:(0,h.jsx)(he,{})})]}),(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsx)("h5",{children:"Giới thiệu bạn bè"}),(0,h.jsx)("div",{className:"fe",children:"Bạn bè được giảm 5% giá sản phẩm và bạn nhận hoa hồng vĩnh viễn."}),(0,h.jsx)(re,{}),(0,h.jsx)("div",{className:"ta",children:(0,h.jsxs)(u.Z,{to:"https://help.divineshop.vn/gioi-thieu/chuong-trinh-gioi-thieu-ban-be",className:"ta jc Ee ge",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.KZ}),(0,h.jsx)("div",{children:"Xem chi tiết"})]})})]})]}),oe=i(3456),ue=i(5826),xe=i(6398);var je=()=>{var e,s;const{id:i}=r(),t=(0,l.useMemo)((()=>({id:i})),[i]),{ref:n,defer:a,size:c,state:d}=(0,xe.Z)({slug:"related",query:t});return d.loading||null!==(e=d.data[0])&&void 0!==e&&null!==(s=e.list)&&void 0!==s&&s.length?(0,h.jsxs)("div",{className:"Oe",style:a?{minHeight:`${(null==c?void 0:c.height)||ue._p}px`}:null,ref:n,children:[(0,h.jsx)("h4",{children:"Sản phẩm liên quan"}),!a&&(0,h.jsx)(oe.Z,{...d})]}):null},ve=i(4742),ge=i(4360);var be=()=>{const{id:e,name:s,image:i}=r(),{0:t,1:n}=(0,l.useState)(!0),{loading:c,data:{list:d}={}}=(0,a.Z)("/api/product/slide",{query:{id:e},defer:t});return t||null==d||!d.length?(0,h.jsxs)("div",{className:"Le",children:[(0,h.jsx)("div",{className:"lf gf ff",children:(0,h.jsx)(ve.Z,{className:"xc",src:i,alt:s})}),t||c?(0,h.jsx)("button",{type:"button",className:"b Y ge Zd ra",onClick:()=>n(!1),onTouchStart:()=>(0,L.CM)(e),onMouseDown:()=>(0,L.CM)(e),disabled:!t,children:"Xem thêm ảnh"}):(0,h.jsx)("div",{className:"he Td",children:"Sản phẩm chỉ có một ảnh"})]}):(0,h.jsx)("div",{className:"xc Xc rc",children:(0,h.jsx)(ge.Z,{children:d.slice(0,13).map(((e,s)=>(0,h.jsx)(ve.Z,{src:e},s)))})})},pe=i(4591),Ne=i(987);var Ze=i(6562);const fe=e=>{let{onClick:s}=e;const{data:i}=(0,z.Z)();return i?(0,h.jsx)("button",{type:"button",className:"b Zd ge",onClick:s,children:"Trả lời"}):(0,h.jsx)(w.Z,{className:"b Zd ge",children:"Trả lời"})},Ce=e=>{let{text:s,purchased:i,date:t,setTag:n,user:{fullName:a,image:l,staff:c,membership:d}}=e;return(0,h.jsxs)("div",{className:"ta cg Ne",children:[(0,h.jsx)(ve.Z,{src:l,className:"Ub lb Ha ma zc te",alt:a}),(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsxs)("div",{className:"Mf gc De",children:[(0,h.jsxs)("div",{className:"ta gc De",children:[(0,h.jsx)("div",{className:"Zd",children:a}),c&&(0,h.jsx)("div",{children:(0,h.jsx)(k.Z,{className:"Cb Da ge",icon:x.Q$,title:"Nhân viên CSKH"})}),d&&(0,h.jsx)("div",{children:(0,h.jsx)(ve.Z,{src:d.image,className:"Cb Da",alt:d.name,title:d.name})}),i&&(0,h.jsx)("div",{children:(0,h.jsx)(k.Z,{className:"Cb Da be",icon:x.wW,title:"Đã mua sản phẩm"})})]}),(0,h.jsx)("div",{className:"va Lf he",children:"•"}),(0,h.jsx)("div",{className:"he",title:"Thời gian bình luận",children:t})]}),(0,h.jsx)("div",{children:s}),(0,h.jsx)(fe,{onClick:()=>n(a)})]})]})},ye=e=>{let{id:s,tag:i,setTag:t}=e;const{data:n}=(0,z.Z)(),{id:a}=r(),{loading:l,submit:c}=(0,Z.Z)({id:s});if(!n)return null;return(0,h.jsx)("form",{action:"/api/product/comment/reply",className:"cg",onSubmit:e=>{c(e,{onFulfilled:i=>{const l={text:e.target.elements.text.value,...i,user:{...i.user,image:n.image,membership:n.membership}};((e,s,i)=>{(0,F.gz)((0,F.wS)(q.cS,{id:e}),(e=>e.map((e=>{let{list:t}=e;const n=t.findIndex((e=>e.id===s)),a=t[n];return{list:a?t.slice(0,n).concat({...a,replies:a.replies.concat(i)}).concat(t.slice(n+1)):t}}))))})(a,s,l),t(null),e.target.reset()}})},children:(0,h.jsxs)("fieldset",{className:"ta jc Ne",disabled:l,children:[(0,h.jsx)(ve.Z,{src:n.image,className:"Ub lb Ha ma zc te",alt:"Ảnh đại diện"}),(0,h.jsx)(p.Z,{className:"Vb",children:(0,h.jsx)(f.II,{name:"text",className:"Pd",defaultValue:i&&`@${i} `,placeholder:"Nhập bình luận của bạn",autoFocus:!0,children:(0,h.jsx)("button",{type:"submit",className:"y J b za Gd ra he",children:(0,h.jsx)(k.Z,{className:"Db wa",icon:x.xc,title:"Gửi bình luận"})})},i)})]})})},ke=e=>{let{text:s,purchased:i,hidden:t,replies:n,date:a,user:{fullName:c,image:d,membership:r,staff:m},setTag:o}=e;return(0,h.jsxs)("div",{className:(0,O.Z)("Oe",t&&"re"),children:[(0,h.jsxs)("div",{className:"ta Ne",children:[(0,h.jsx)(ve.Z,{src:d,className:"Ub ub Ma zc te",alt:c}),(0,h.jsxs)("div",{className:"Fe",children:[(0,h.jsxs)("div",{className:"ta gc De",children:[(0,h.jsx)("div",{className:"Zd",children:c}),m&&(0,h.jsx)("div",{children:(0,h.jsx)(k.Z,{className:"Cb Da ge",icon:x.Q$,title:"Nhân viên CSKH"})}),r&&(0,h.jsx)("div",{children:(0,h.jsx)(ve.Z,{src:r.image,className:"Cb Da",alt:r.name,title:r.name})}),i&&(0,h.jsxs)("div",{className:"ta Ee be",children:[(0,h.jsx)(k.Z,{icon:x.wW,className:"Cb Da"}),(0,h.jsx)("div",{children:"Đã mua sản phẩm"})]})]}),(0,h.jsxs)("div",{className:"he",children:["Bình luận vào ",a]}),(0,h.jsx)("div",{children:s}),(0,h.jsx)(fe,{onClick:()=>o(c)})]})]}),n.map(((e,s)=>(0,l.createElement)(Ce,{...e,setTag:o,key:s})))]})},Se=e=>{const{0:s,1:i}=(0,l.useState)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ke,{...e,setTag:i}),void 0!==s&&(0,h.jsx)(ye,{id:e.id,tag:s,setTag:i})]})},De=(0,l.memo)((e=>{let{list:s}=e;return s.map(((e,s)=>(0,l.createElement)(Se,{...e,key:s})))})),Te=()=>{const{id:e}=r(),s=(0,l.useRef)(),i=(0,Ze.Z)(s),t=(0,pe.Z)(q.cS,{query:{id:e},defer:i});return(0,h.jsxs)("div",{className:"Oe",ref:s,children:[t.data.map(((e,s)=>{let{list:i}=e;return(0,h.jsx)(De,{list:i},s)})),(0,h.jsx)("div",{className:"f"}),(0,h.jsx)(Ne.Z,{...t,children:"Xem thêm các bình luận khác"})]})},Me=()=>{const{data:e}=(0,z.Z)(),{id:s}=r(),{loading:i,submit:t}=(0,Z.Z)({product_id:s});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("form",{action:"/api/product/comment",onSubmit:i=>{t(i,{onFulfilled:t=>{const n={replies:[],text:i.target.elements.text.value,...t,user:{...t.user,image:e.image,membership:e.membership}};((e,s)=>{(0,F.gz)((0,F.wS)(q.cS,{id:e}),(e=>e.map((e=>{let{list:i}=e;return{list:[s].concat(i)}}))))})(s,n),i.target.reset()}})},children:(0,h.jsxs)("fieldset",{className:"Fe",disabled:i,children:[(0,h.jsx)(p.Z,{children:(0,h.jsx)(f.gx,{name:"text",placeholder:"Nhập nội dung bình luận"})}),e&&(0,h.jsx)("div",{className:"ta lc",children:(0,h.jsxs)("button",{type:"submit",className:"b c ta jc Ee",children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.xc}),(0,h.jsx)("div",{children:"Gửi bình luận"})]})})]})}),!e&&(0,h.jsx)("div",{className:"ta lc",children:(0,h.jsxs)(w.Z,{className:"b c ta jc Ee",title:"Đăng nhập để gửi bình luận",disabled:i,children:[(0,h.jsx)(k.Z,{className:"Cb Da",icon:x.xc}),(0,h.jsx)("div",{children:"Gửi bình luận"})]})})]})};var Fe=()=>{const{id:e}=r(),{data:s}=(0,a.Z)("/api/product/info",{query:{id:e}});return s&&!1!==s.comments?(0,h.jsxs)("div",{className:"Qb Oe",children:[(0,h.jsx)("h4",{children:"Bình luận"}),(0,h.jsxs)("div",{className:"Ie",children:[(0,h.jsx)("div",{children:"Thời gian phản hồi trung bình: 5 phút!"}),(0,h.jsx)(Me,{})]}),(0,h.jsx)(Te,{})]}):null};var qe=e=>{let{data:{product:s}}=e;return(0,h.jsxs)(d.Provider,{value:s,children:[(0,h.jsx)(t.Z,{title:s.name,description:s.meta.description,image:s.meta.image||s.image,"og:title":s.meta.title}),(0,h.jsx)("div",{className:"Hd Sc",children:(0,h.jsx)("div",{className:"a",children:(0,h.jsxs)("div",{className:"vg Pe",children:[(0,h.jsx)("div",{className:"Ig",children:(0,h.jsx)(be,{})}),(0,h.jsx)("div",{className:"Ig",children:(0,h.jsx)(ie,{})}),(0,h.jsx)("div",{className:"Hg",children:(0,h.jsx)(me,{})})]})})}),(0,h.jsxs)("div",{className:"a Cd Se",children:[(0,h.jsx)("div",{className:"Qb Ta Se",children:(0,h.jsx)(o,{})}),(0,h.jsx)(je,{}),(0,h.jsx)(Fe,{})]})]})}}}]);