"use strict";(self.webpackChunkdivine_shop_gatsby=self.webpackChunkdivine_shop_gatsby||[]).push([[8458],{4591:function(e,t,r){var n=r(7294),a=r(3994),s=r(1492),c=r.n(s),l=r(7321);t.Z=function(e,t){let{query:r,defer:s}=void 0===t?{}:t;const{read:u,modify:o,dispatch:p}=(0,l.Z)(e,r),h=(0,n.useCallback)((()=>{const{promise:e,error:t,data:r}=u([]);return r.length+(e||t?1:0)||1}),[u]),{0:f,1:i}=(0,n.useState)(h),d=(0,n.useRef)(u);(0,n.useEffect)((()=>{d.current!==u&&(d.current=u,i(h()))}),[h,u]);const g=d.current===u?f:h(),b=(0,n.useCallback)((()=>i((e=>e+1))),[]),k=(0,n.useCallback)((()=>o({error:null})),[o]),C=(0,n.useCallback)((()=>{const{prefetch:t,data:n}=u();t||o({prefetch:c()(e,{...r,page:n.length+1})},!1)}),[e,r,u,o]),{error:y,data:v,promise:_,prefetch:m}=u();let w;m?w=m:_||v[g-1]||y||s||a.s||(w=c()(e,1!==g?{page:g,...r}:r)),w&&p(w.then((e=>v.concat(e))));const Z=!(!w&&!_);return{page:g,loading:!!Z||a.s||0===v.length&&!y,error:y,data:v,next:Z||y?null:b,prefetch:Z||y?null:C,retry:y?k:null}}}}]);